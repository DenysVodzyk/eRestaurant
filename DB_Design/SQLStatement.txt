CREATE TABLE user
(
    id           INT     NOT NULL AUTO_INCREMENT,
    login        VARCHAR(30),
    password     VARCHAR(30),
    isAuthorized BOOLEAN NOT NULL,
    name         VARCHAR(30),
    lastName     VARCHAR(30),
    dOb          DATE,
    email        VARCHAR(30),
    addressId    INT,
    paymentId    INT,
    orderId      INT,
    PRIMARY KEY (id)
);

ALTER TABLE user
    ADD FOREIGN KEY address_fk (addressId) REFERENCES address (id);

ALTER TABLE user
    ADD FOREIGN KEY paymentCard_fk (paymentId) REFERENCES payment_card (id);

ALTER TABLE user
    ADD role VARCHAR(20);

CREATE TABLE address
(
    id         INT NOT NULL AUTO_INCREMENT,
    userId     INT,
    street     VARCHAR(40),
    city       VARCHAR(40),
    province   VARCHAR(30),
    postalCode VARCHAR(8),
    note       VARCHAR(100),
    PRIMARY KEY (id)
);

CREATE TABLE payment_card
(
    id               INT NOT NULL AUTO_INCREMENT,
    customerFullName VARCHAR(60),
    cardNumber       VARCHAR(20),
    cvcCode          INT,
    expirationDate   DATE,
    PRIMARY KEY (id)
);


# ready
CREATE TABLE order_
(
    id              INT NOT NULL AUTO_INCREMENT,
    userId          INT,
    totalPrice      INT,
    orderStatus     VARCHAR(20),
    orderSubmitTime TIMESTAMP,
    FOREIGN KEY user_fk (userId) REFERENCES user (id),
    PRIMARY KEY (id)
);

# ready
CREATE TABLE ordered_dish
(
    id         INT NOT NULL AUTO_INCREMENT,
    userId     INT,
    dishId     INT,
    dishStatus VARCHAR(20),
    PRIMARY KEY (id)
);

ALTER TABLE ordered_dish
    ADD FOREIGN KEY dish_fk (dishId) REFERENCES dish (id);

ALTER TABLE ordered_dish
    ADD FOREIGN KEY customer_order_fk (orderId) REFERENCES order_ (id);


# ready
CREATE TABLE dish
(
    id             INT NOT NULL AUTO_INCREMENT,
    price          INT,
    dishCategoryId INT,
    isKitchenMade  BOOLEAN,
    isActive       BOOLEAN,
    PRIMARY KEY (id)
);

ALTER TABLE dish
    ADD ingredients VARCHAR(500);

ALTER TABLE dish
    ADD dishCategoryId INT;

ALTER TABLE dish
    ADD FOREIGN KEY dish_category_fk (dishCategoryId) REFERENCES dish_category (id);

CREATE TABLE dish_category
(
    id   INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20),
    PRIMARY KEY (id)
);